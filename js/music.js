var vh=1*window.innerHeight,scoMusic={params:new URLSearchParams(window.location.search),extractValue:function(e){return/\("([^\s]+)"\)/g.exec(e)[1]},changeMusicBg:function(e=!0){const t=document.getElementById("Music-bg"),n=document.getElementsByClassName("Music-loading");if(e){const e=document.querySelector("#Music-page .aplayer-pic");var s=new Image;s.src=scoMusic.extractValue(e.style.backgroundImage),s.onload=function(){t.style.backgroundImage=e.style.backgroundImage}}else{let e=setInterval((()=>{document.querySelector("#Music-page .aplayer-pic")&&(n[0].style.display="none",clearInterval(e),document.querySelector("meting-js").aplayer.volume(.8,!0),scoMusic.addEventListenerChangeMusicBg(),t.style.display="block")}),100)}},lrcupdate:function(){var e=document.querySelector(".aplayer-lrc-contents"),t=e.querySelector("p.aplayer-lrc-current");if(t){var n=80*-Array.from(e.children).indexOf(t);e.style.transform="translateY("+n+"px)"}},buttonlist:function(){document.querySelector(".aplayer-lrc").addEventListener("click",(function(){const e=document.querySelector(".aplayer-list");e.classList.contains("aplayer-list-hide")?e.classList.remove("aplayer-list-hide"):e.classList.add("aplayer-list-hide")}))},addEventListenerChangeMusicBg:function(){const e=document.getElementById("Music-page").querySelector("meting-js").aplayer;e.on("loadeddata",(function(){scoMusic.changeMusicBg()})),e.on("timeupdate",(function(){scoMusic.lrcupdate()})),scoMusic.buttonlist()},getCustomPlayList:function(){const e=document.getElementById("Music-page"),t=scoMusic.params.get("type")||"playlist";if(scoMusic.params.get("id")&&params.get("server")){var n=scoMusic.params.get("id"),s=scoMusic.params.get("server");e.innerHTML=`<meting-js id="${n}" server="${s}" type="${t}" preload="auto" order="random"></meting-js>`}else e.innerHTML=`<meting-js id="${musicConfig.userId}" server="${musicConfig.userServer}" type="${musicConfig.userType}" preload="auto" order="random"></meting-js>`;scoMusic.changeMusicBg(!1)},setKeydown:function(e){const t=document.querySelector("meting-js").aplayer;"Space"===e.code&&(e.preventDefault(),t.toggle()),39===e.keyCode&&(e.preventDefault(),t.skipForward()),37===e.keyCode&&(e.preventDefault(),t.skipBack()),38===e.keyCode&&musicConfig.volume<=1&&(musicConfig.volume+=.1,t.volume(musicConfig.volume,!0)),40===e.keyCode&&musicConfig.volume>=0&&(musicConfig.volume+=-.1,t.volume(musicConfig.volume,!0))},init:function(){document.documentElement.style.setProperty("--vh",`${vh}px`),this.getCustomPlayList(),document.addEventListener("keydown",scoMusic.setKeydown)}};window.addEventListener("resize",(()=>{let e=1*window.innerHeight;document.documentElement.style.setProperty("--vh",`${e}px`)}));